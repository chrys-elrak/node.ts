!function(e,n){for(var t in n)e[t]=n[t];n.__esModule&&Object.defineProperty(e,"__esModule",{value:!0})}(exports,(()=>{"use strict";var __webpack_modules__={"./server.ts":function(__unused_webpack_module,exports,__webpack_require__){eval('\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { "default": mod };\n};\nObject.defineProperty(exports, "__esModule", ({ value: true }));\nvar express_1 = __importDefault(__webpack_require__(/*! express */ "express"));\nvar config_1 = __importDefault(__webpack_require__(/*! ./src/config */ "./src/config.ts"));\nvar defaultRoutes_1 = __importDefault(__webpack_require__(/*! ./src/defaultRoutes */ "./src/defaultRoutes.ts"));\nvar app = express_1.default();\napp.use(express_1.default.json());\napp.use(express_1.default.urlencoded({ extended: true }));\napp.use(\'/api/v1\', defaultRoutes_1.default);\napp.all(\'/**\', function (req, res) { return res.status(404).send(\'Page not found\'); });\napp.use(function (err, req, res, next) {\n    if (err) {\n        console.error(err);\n        return res.status(500).send(\'Something broke ❌️!\');\n    }\n});\napp.listen(config_1.default.port, function () {\n    console.log("Server running on port " + config_1.default.port);\n});\n\n\n//# sourceURL=webpack://node.ts/./server.ts?')},"./src/common/controllers/authenticationController.ts":function(__unused_webpack_module,exports,__webpack_require__){eval('\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __generator = (this && this.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), "throw": verb(1), "return": verb(2) }, typeof Symbol === "function" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError("Generator is already executing.");\n        while (_) try {\n            if (f = 1, y && (t = op[0] & 2 ? y["return"] : op[0] ? y["throw"] || ((t = y["return"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\nObject.defineProperty(exports, "__esModule", ({ value: true }));\nexports.login = exports.register = void 0;\nvar JSONResponseModel_1 = __webpack_require__(/*! ../models/JSONResponseModel */ "./src/common/models/JSONResponseModel.ts");\nvar register = function (req, res, next) { return __awaiter(void 0, void 0, void 0, function () {\n    return __generator(this, function (_a) {\n        try {\n            return [2 /*return*/, res.status(200).json(JSONResponseModel_1.ResponseSuccess.EMPTY_MODEL)];\n        }\n        catch (e) {\n            console.log(e);\n            return [2 /*return*/, res.status(500).json(new JSONResponseModel_1.ResponseError(e, 500, false))];\n        }\n        return [2 /*return*/];\n    });\n}); };\nexports.register = register;\nvar login = function (req, res, next) {\n    return res.status(200).json(JSONResponseModel_1.ResponseSuccess.EMPTY_MODEL);\n};\nexports.login = login;\n\n\n//# sourceURL=webpack://node.ts/./src/common/controllers/authenticationController.ts?')},"./src/common/helpers/objectHelper.ts":(__unused_webpack_module,exports)=>{eval('\nObject.defineProperty(exports, "__esModule", ({ value: true }));\nexports.sortObjectByKey = void 0;\nfunction sortObjectByKey(object) {\n    return Object.keys(object).sort().reduce(function (obj, key) {\n        obj[key] = object[key];\n        return obj;\n    }, {});\n}\nexports.sortObjectByKey = sortObjectByKey;\n\n\n//# sourceURL=webpack://node.ts/./src/common/helpers/objectHelper.ts?')},"./src/common/models/JSONResponseModel.ts":(__unused_webpack_module,exports)=>{eval("\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\nexports.ResponseError = exports.ResponseSuccess = void 0;\nvar ResponseSuccess = /** @class */ (function () {\n    function ResponseSuccess(message, status, success, data) {\n        this.message = message;\n        this.status = status;\n        this.success = success;\n        this.data = data;\n    }\n    ResponseSuccess.EMPTY_MODEL = {\n        message: 'Success',\n        status: 200,\n        success: true\n    };\n    return ResponseSuccess;\n}());\nexports.ResponseSuccess = ResponseSuccess;\nvar ResponseError = /** @class */ (function () {\n    function ResponseError(error, status, success) {\n        this.error = error;\n        this.status = status;\n        this.success = success;\n    }\n    ResponseError.EMPTY_MODEL = {\n        message: 'Failed',\n        status: 400,\n        success: false\n    };\n    return ResponseError;\n}());\nexports.ResponseError = ResponseError;\n\n\n//# sourceURL=webpack://node.ts/./src/common/models/JSONResponseModel.ts?")},"./src/common/routes/index.ts":function(__unused_webpack_module,exports,__webpack_require__){eval('\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __generator = (this && this.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), "throw": verb(1), "return": verb(2) }, typeof Symbol === "function" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError("Generator is already executing.");\n        while (_) try {\n            if (f = 1, y && (t = op[0] & 2 ? y["return"] : op[0] ? y["throw"] || ((t = y["return"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\nObject.defineProperty(exports, "__esModule", ({ value: true }));\nvar JSONResponseModel_1 = __webpack_require__(/*! ./../models/JSONResponseModel */ "./src/common/models/JSONResponseModel.ts");\nvar express_1 = __webpack_require__(/*! express */ "express");\nvar authenticationController_1 = __webpack_require__(/*! ../controllers/authenticationController */ "./src/common/controllers/authenticationController.ts");\nvar DBService_1 = __webpack_require__(/*! ../services/DBService */ "./src/common/services/DBService.ts");\nvar router = express_1.Router();\nrouter.route(\'/login\').post(authenticationController_1.login);\nrouter.route(\'/register\').post(authenticationController_1.register);\nrouter.route(\'/users\')\n    .get(function (req, res, next) { return __awaiter(void 0, void 0, void 0, function () {\n    var users, e_1;\n    return __generator(this, function (_a) {\n        switch (_a.label) {\n            case 0:\n                _a.trys.push([0, 2, , 3]);\n                return [4 /*yield*/, DBService_1.getCollections(\'users\')];\n            case 1:\n                users = _a.sent();\n                return [2 /*return*/, res.status(200).json(users)];\n            case 2:\n                e_1 = _a.sent();\n                next(e_1);\n                return [3 /*break*/, 3];\n            case 3: return [2 /*return*/];\n        }\n    });\n}); })\n    .post(function (req, res, next) { return __awaiter(void 0, void 0, void 0, function () {\n    var userId, e_2;\n    return __generator(this, function (_a) {\n        switch (_a.label) {\n            case 0:\n                _a.trys.push([0, 2, , 3]);\n                return [4 /*yield*/, DBService_1.addCollection(\'users\', req.body)];\n            case 1:\n                userId = _a.sent();\n                return [2 /*return*/, res.status(200).json(userId)];\n            case 2:\n                e_2 = _a.sent();\n                next(e_2);\n                return [3 /*break*/, 3];\n            case 3: return [2 /*return*/];\n        }\n    });\n}); });\nrouter.route(\'/users/:id\')\n    .get(function (req, res, next) { return __awaiter(void 0, void 0, void 0, function () {\n    var user, e_3;\n    return __generator(this, function (_a) {\n        switch (_a.label) {\n            case 0:\n                _a.trys.push([0, 2, , 3]);\n                return [4 /*yield*/, DBService_1.getSingleCollection(\'users\', req.params.id)];\n            case 1:\n                user = _a.sent();\n                return [2 /*return*/, res.status(200).json(user)];\n            case 2:\n                e_3 = _a.sent();\n                next(e_3);\n                return [3 /*break*/, 3];\n            case 3: return [2 /*return*/];\n        }\n    });\n}); })\n    .delete(function (req, res, next) { return __awaiter(void 0, void 0, void 0, function () {\n    var removed, e_4;\n    return __generator(this, function (_a) {\n        switch (_a.label) {\n            case 0:\n                _a.trys.push([0, 2, , 3]);\n                return [4 /*yield*/, DBService_1.removeCollection(\'users\', req.params.id)];\n            case 1:\n                removed = _a.sent();\n                if (!removed) {\n                    return [2 /*return*/, res.status(400).json(new JSONResponseModel_1.ResponseError("Can not remove document. Maybe this document doesn\'t exist.", 400, false))];\n                }\n                return [2 /*return*/, res.sendStatus(204)];\n            case 2:\n                e_4 = _a.sent();\n                next(e_4);\n                return [3 /*break*/, 3];\n            case 3: return [2 /*return*/];\n        }\n    });\n}); })\n    .put(function (req, res, next) { return __awaiter(void 0, void 0, void 0, function () {\n    var updated, e_5;\n    return __generator(this, function (_a) {\n        switch (_a.label) {\n            case 0:\n                _a.trys.push([0, 2, , 3]);\n                return [4 /*yield*/, DBService_1.updateCollection(\'users\', req.params.id, req.body)];\n            case 1:\n                updated = _a.sent();\n                return [2 /*return*/, res.status(200).send(updated)];\n            case 2:\n                e_5 = _a.sent();\n                next(e_5);\n                return [3 /*break*/, 3];\n            case 3: return [2 /*return*/];\n        }\n    });\n}); });\nexports.default = router;\n\n\n//# sourceURL=webpack://node.ts/./src/common/routes/index.ts?')},"./src/common/services/DBService.ts":function(__unused_webpack_module,exports,__webpack_require__){eval('\nvar __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __generator = (this && this.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), "throw": verb(1), "return": verb(2) }, typeof Symbol === "function" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError("Generator is already executing.");\n        while (_) try {\n            if (f = 1, y && (t = op[0] & 2 ? y["return"] : op[0] ? y["throw"] || ((t = y["return"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { "default": mod };\n};\nObject.defineProperty(exports, "__esModule", ({ value: true }));\nexports.updateCollection = exports.removeCollection = exports.getSingleCollection = exports.getCollections = exports.addCollection = void 0;\nvar firebase_admin_1 = __importDefault(__webpack_require__(/*! firebase-admin */ "firebase-admin"));\nvar config_1 = __importDefault(__webpack_require__(/*! ../../config */ "./src/config.ts"));\nvar objectHelper_1 = __webpack_require__(/*! ../helpers/objectHelper */ "./src/common/helpers/objectHelper.ts");\nfirebase_admin_1.default.initializeApp({\n    credential: firebase_admin_1.default.credential.cert(config_1.default.credential)\n});\nvar db = firebase_admin_1.default.firestore();\nfunction addCollection(collection, data) {\n    return __awaiter(this, void 0, void 0, function () {\n        var refDoc;\n        return __generator(this, function (_a) {\n            switch (_a.label) {\n                case 0: return [4 /*yield*/, db.collection(collection).add(data)];\n                case 1:\n                    refDoc = _a.sent();\n                    return [2 /*return*/, refDoc.id];\n            }\n        });\n    });\n}\nexports.addCollection = addCollection;\nfunction getCollections(collection) {\n    return __awaiter(this, void 0, void 0, function () {\n        var results, snapshot;\n        return __generator(this, function (_a) {\n            switch (_a.label) {\n                case 0:\n                    results = [];\n                    return [4 /*yield*/, db.collection(collection).get()];\n                case 1:\n                    snapshot = _a.sent();\n                    snapshot.forEach(function (doc) {\n                        results.push(__assign({ id: doc.id }, doc.data()));\n                    });\n                    return [2 /*return*/, results];\n            }\n        });\n    });\n}\nexports.getCollections = getCollections;\nfunction getSingleCollection(collection, id) {\n    return __awaiter(this, void 0, void 0, function () {\n        var snapshot;\n        return __generator(this, function (_a) {\n            switch (_a.label) {\n                case 0: return [4 /*yield*/, db.collection(collection).doc(id).get()];\n                case 1:\n                    snapshot = _a.sent();\n                    if (snapshot.exists) {\n                        return [2 /*return*/, __assign({ id: snapshot.id }, snapshot.data())];\n                    }\n                    return [2 /*return*/, null];\n            }\n        });\n    });\n}\nexports.getSingleCollection = getSingleCollection;\nfunction removeCollection(collection, id) {\n    return __awaiter(this, void 0, void 0, function () {\n        var doc, docPersist;\n        return __generator(this, function (_a) {\n            switch (_a.label) {\n                case 0: return [4 /*yield*/, getSingleCollection(collection, id)];\n                case 1:\n                    doc = _a.sent();\n                    if (!doc) {\n                        return [2 /*return*/, false];\n                    }\n                    return [4 /*yield*/, db.collection(collection).doc(id).delete()];\n                case 2:\n                    _a.sent();\n                    return [4 /*yield*/, getSingleCollection(collection, id)];\n                case 3:\n                    docPersist = _a.sent();\n                    if (docPersist) {\n                        return [2 /*return*/, false];\n                    }\n                    return [2 /*return*/, true];\n            }\n        });\n    });\n}\nexports.removeCollection = removeCollection;\nfunction updateCollection(collection, id, data) {\n    return __awaiter(this, void 0, void 0, function () {\n        var doc, docUpdated;\n        return __generator(this, function (_a) {\n            switch (_a.label) {\n                case 0: return [4 /*yield*/, getSingleCollection(collection, id)];\n                case 1:\n                    doc = _a.sent();\n                    if (!doc) {\n                        return [2 /*return*/, false];\n                    }\n                    return [4 /*yield*/, db.collection(collection).doc(id).update(data)];\n                case 2:\n                    _a.sent();\n                    return [4 /*yield*/, getSingleCollection(collection, id)];\n                case 3:\n                    docUpdated = _a.sent();\n                    console.log(JSON.stringify(objectHelper_1.sortObjectByKey(doc)), JSON.stringify(objectHelper_1.sortObjectByKey(docUpdated)));\n                    if (JSON.stringify(objectHelper_1.sortObjectByKey(doc)) === JSON.stringify(objectHelper_1.sortObjectByKey(docUpdated))) {\n                        return [2 /*return*/, false];\n                    }\n                    return [2 /*return*/, true];\n            }\n        });\n    });\n}\nexports.updateCollection = updateCollection;\n\n\n//# sourceURL=webpack://node.ts/./src/common/services/DBService.ts?')},"./src/config.ts":function(__unused_webpack_module,exports,__webpack_require__){eval('\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\n    Object.defineProperty(o, "default", { enumerable: true, value: v });\n}) : function(o, v) {\n    o["default"] = v;\n});\nvar __importStar = (this && this.__importStar) || function (mod) {\n    if (mod && mod.__esModule) return mod;\n    var result = {};\n    if (mod != null) for (var k in mod) if (k !== "default" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n    __setModuleDefault(result, mod);\n    return result;\n};\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { "default": mod };\n};\nObject.defineProperty(exports, "__esModule", ({ value: true }));\nvar dotenv = __importStar(__webpack_require__(/*! dotenv */ "dotenv"));\nvar assert_1 = __importDefault(__webpack_require__(/*! assert */ "assert"));\ndotenv.config();\nassert_1.default(process.env.PORT, "Port is required");\nassert_1.default(process.env.PRIVATE_KEY, "Private key is required");\nvar config = {\n    host: process.env.HOST,\n    hostUrl: process.env.HOST_URL,\n    port: process.env.PORT,\n    credential: {\n        projectId: process.env.PROJECT_ID,\n        privateKey: process.env.PRIVATE_KEY,\n        clientEmail: process.env.CLIENT_EMAIL,\n    }\n};\nexports.default = config;\n\n\n//# sourceURL=webpack://node.ts/./src/config.ts?')},"./src/defaultRoutes.ts":function(__unused_webpack_module,exports,__webpack_require__){eval('\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { "default": mod };\n};\nObject.defineProperty(exports, "__esModule", ({ value: true }));\nvar express_1 = __importDefault(__webpack_require__(/*! express */ "express"));\nvar index_1 = __importDefault(__webpack_require__(/*! ./common/routes/index */ "./src/common/routes/index.ts"));\nvar router = express_1.default.Router();\nrouter.use(index_1.default);\nexports.default = router;\n\n\n//# sourceURL=webpack://node.ts/./src/defaultRoutes.ts?')},assert:e=>{e.exports=require("assert")},dotenv:e=>{e.exports=require("dotenv")},express:e=>{e.exports=require("express")},"firebase-admin":e=>{e.exports=require("firebase-admin")}},__webpack_module_cache__={};function __webpack_require__(e){if(__webpack_module_cache__[e])return __webpack_module_cache__[e].exports;var n=__webpack_module_cache__[e]={exports:{}};return __webpack_modules__[e].call(n.exports,n,n.exports,__webpack_require__),n.exports}return __webpack_require__("./server.ts")})());